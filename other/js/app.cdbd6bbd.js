(function(e){function t(t){for(var n,o,l=t[0],c=t[1],s=t[2],d=0,u=[];d<l.length;d++)o=l[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&u.push(i[o][0]),i[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);h&&h(t);while(u.length)u.shift()();return r.push.apply(r,s||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(n=!1)}n&&(r.splice(t--,1),e=c(c.s=a[0]))}return e}var n={},o={app:0},i={app:0},r=[];function l(e){return c.p+"js/"+({about:"about"}[e]||e)+"."+{about:"af4df74d"}[e]+".js"}function c(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(e){var t=[],a={about:1};o[e]?t.push(o[e]):0!==o[e]&&a[e]&&t.push(o[e]=new Promise((function(t,a){for(var n="css/"+({about:"about"}[e]||e)+"."+{about:"b009bd24"}[e]+".css",i=c.p+n,r=document.getElementsByTagName("link"),l=0;l<r.length;l++){var s=r[l],d=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(d===n||d===i))return t()}var u=document.getElementsByTagName("style");for(l=0;l<u.length;l++){s=u[l],d=s.getAttribute("data-href");if(d===n||d===i)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var n=t&&t.target&&t.target.src||i,r=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=n,delete o[e],h.parentNode.removeChild(h),a(r)},h.href=i;var p=document.getElementsByTagName("head")[0];p.appendChild(h)})).then((function(){o[e]=0})));var n=i[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,a){n=i[e]=[t,a]}));t.push(n[2]=r);var s,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=l(e);var u=new Error;s=function(t){d.onerror=d.onload=null,clearTimeout(h);var a=i[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+n+": "+o+")",u.name="ChunkLoadError",u.type=n,u.request=o,a[1](u)}i[e]=void 0}};var h=setTimeout((function(){s({type:"timeout",target:d})}),12e4);d.onerror=d.onload=s,document.head.appendChild(d)}return Promise.all(t)},c.m=e,c.c=n,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(a,n,function(t){return e[t]}.bind(null,n));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],d=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var h=d;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var n=a("85ec"),o=a.n(n);o.a},"35a13":function(e,t,a){},"3ac9":function(e,t,a){},"4e49":function(e,t,a){"use strict";var n=a("e2db"),o=a.n(n);o.a},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),o=a("5c96"),i=a.n(o),r=(a("0fae"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapBox",attrs:{id:"app"}},[a("router-view")],1)}),l=[],c=(a("034f"),a("2877")),s={},d=Object(c["a"])(s,r,l,!1,null,null,null),u=d.exports,h=(a("35a13"),a("d3b7"),a("8c4f")),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("topHead"),a("div",{staticClass:"main"},[a("leftBar",{staticClass:"leftBox"}),a("div",{staticClass:"rightBox"},[a("router-view")],1)],1)],1)},m=[],f=a("5530"),g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"60px","line-height":"60px","font-size":"18px",color:"#eee","background-color":"#645f69",padding:"0 10px","text-align":"left"}},[a("el-dropdown",{staticStyle:{float:"right",color:"#eee"},on:{command:e.handleCommand}},[a("span",{staticClass:"el-dropdown-link"},[e.userInfo?a("span",{staticStyle:{cursor:"pointer"}},[e._v(" "+e._s(e.userInfo.username)+" "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]):e._e()]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"personCenter"}},[e._v("个人中心")]),a("el-dropdown-item",{attrs:{command:"logout",divided:""},on:{click:e.logout}},[e._v("退出登录")])],1)],1),e._v(" 某某管理系统 ")],1)},b=[],v=a("2f62"),w={computed:Object(f["a"])({},Object(v["b"])(["userInfo"])),methods:{handleCommand:function(e){switch(e){case"logout":this.logout();break}},logout:function(){this.$store.commit("saveUserInfo",!1),this.$router.push("/login")}}},k=w,x=Object(c["a"])(k,g,b,!1,null,null,null),y=x.exports,R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"background-color":"#eee"}},[a("div",{staticStyle:{height:"50px","line-height":"50px","padding-left":"10px",color:"#eee","background-color":"#494747","font-size":"16px","font-weight":"600"}},[e._v(" 功能列表 ")]),e.myRole?a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2",router:e.openRouter,"background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{open:e.handleOpen,close:e.handleClose}},e._l(e.roleRight,(function(t,n){return t.checked?a("el-submenu",{key:t.name+n,attrs:{index:t.name+""}},[a("template",{slot:"title"},[a("i",{class:t.icon}),a("span",[e._v(e._s(t.name))])]),t.children&&t.children.length>0?a("el-menu-item-group",e._l(t.children,(function(t,n){return t.checked?a("el-menu-item",{key:t.name+n,attrs:{index:t.path}},[e._v(" "+e._s(t.name)+" ")]):e._e()})),1):e._e()],2):e._e()})),1):e._e()],1)},S=[],_=(a("96cf"),a("1da1")),C={computed:Object(f["a"])({},Object(v["b"])(["myRole"])),data:function(){return{roleRight:[],openRouter:!0,menu:[{id:1,name:"用户管理",icon:"el-icon-user-solid",checked:!0,children:[{id:11,name:"用户列表",path:"/user",checked:!0}]},{id:2,name:"列车管理",icon:"el-icon-s-cooperation",checked:!0,children:[{id:21,name:"列车数据",path:"/carManager",checked:!0},{id:22,name:"导入excel",path:"/importExcel",checked:!0}]},{id:3,name:"权限管理",icon:"el-icon-s-tools",checked:!0,children:[{id:31,name:"角色列表",path:"/role",checked:!0},{id:32,name:"权限列表",path:"/right",checked:!0}]}]}},mounted:function(){this.getRight()},methods:{getRight:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getData("/getRight");case 2:a=t.sent,n=a.data.data,console.log("getRight-rel:",a,n),e.roleRight=JSON.parse(n[0].content);case 6:case"end":return t.stop()}}),t)})))()},handleOpen:function(e,t){},handleClose:function(e,t){}}},O=C,P=(a("ed48"),Object(c["a"])(O,R,S,!1,null,"12933dda",null)),N=P.exports,$={name:"Home",components:{topHead:y,leftBar:N},data:function(){return{}},computed:Object(f["a"])({},Object(v["b"])(["userInfo","flushId"])),watch:{flushId:function(e,t){"/"!=this.$router.currentRoute.path&&this.$router.push("/")}},created:function(){this.getMyRight(this.userInfo.myRoleId)},methods:{}},j=$,U=(a("cccb"),Object(c["a"])(j,p,m,!1,null,null,null)),D=U.exports,M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{display:"flex","flex-direction":"column",height:"100%"}},[a("p",[a("el-button",{attrs:{disabled:!e.canAdd,type:"primary",size:"small"},on:{click:e.toAddUser}},[e._v("新增用户")]),a("el-button",{attrs:{disabled:!e.canAdd,type:"primary",size:"small"},on:{click:function(t){e.aa=!e.aa}}},[e._v(e._s(e.aa))]),a("el-button",{attrs:{disabled:!e.canUpdate,type:"success",size:"small"},on:{click:e.exportExcel}},[e._v("导出用户excel表")])],1),a("div",{staticStyle:{flex:"1"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.allPerson,border:"",size:"mini",height:"100%"}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),a("el-table-column",{attrs:{prop:"username",label:"姓名",width:"120"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small",disabled:!e.canUpdate},on:{click:function(a){return e.editChannel(t.row)}}},[e._v("编辑")]),a("el-button",{staticStyle:{color:"#ef5050"},attrs:{type:"text",size:"small",disabled:!e.canDelete},on:{click:function(a){return e.delChannel(t.row)}}},[e._v("删除")])]}}])})],1)],1),a("el-pagination",{staticStyle:{"padding-top":"10px"},attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,"page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}}),a("el-dialog",{attrs:{title:e.isAdd?"新增用户":"修改用户",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[e.isAdd?e._e():a("el-form-item",{attrs:{label:"ID"}},[a("el-input",{attrs:{disabled:!e.isAdd},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),a("el-form-item",{attrs:{label:"角色",prop:"role"}},[a("el-select",{attrs:{placeholder:"请选择角色"},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}},e._l(e.allRole,(function(e,t){return a("el-option",{key:e.name+t,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e.isAdd?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addUser(e.form)}}},[e._v("确定")]):a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.sureChange(e.form)}}},[e._v("修改")])],1)],1)],1)},z=[],I=(a("a434"),{exportExcel:function(e){for(var t="ID,用户名,密码,性别,角色\n",a=0;a<e.length;a++)t+=e[a].id+","+e[a].username+","+e[a].password+","+e[a].sex+","+e[a].role,t+="\n";var n="data:text/csv;charset=utf-8,\ufeff"+encodeURIComponent(t),o=document.createElement("a");o.href=n,o.download="json数据表.csv",o.click()}}),A=I,E={computed:Object(f["a"])({},Object(v["b"])(["userInfo"])),data:function(){return{aa:!0,fatherName:"用户管理",pageName:"用户列表",canRead:!1,canAdd:!1,canDelete:!1,canUpdate:!1,isDisable:!0,allPerson:[],dialogVisible:!1,form:{},isAdd:!1,currentPage:1,pageSize:10,total:50,allRole:[]}},mounted:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.userInfo&&e.getRight(),t.next=3,e.getData(1,10);case 3:a=t.sent,e.allPerson=a.data.data,e.total=a.data.total,e.getAllRole();case 7:case"end":return t.stop()}}),t)})))()},methods:{getRight:function(){var e=this.getPageRight(this.fatherName,this.pageName);if(e)for(var t=0;t<e.children.length;t++){var a=e.children[t];switch(a.path){case"read":this.canRead=a.checked;break;case"add":this.canAdd=a.checked;break;case"delete":this.canDelete=a.checked;break;case"update":this.canUpdate=a.checked;break}}},getAllRole:function(){var e=this;this.$axios({method:"get",url:"".concat(window.baseUrl,"/getAllRole")}).then((function(t){e.allRole=[];for(var a=0;a<t.data.data.length;a++){var n=t.data.data[a];n.roleRight=JSON.parse(n.roleRight),e.allRole.push(n)}})).catch((function(e){}))},exportExcel:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getData(1,e.total);case 2:a=t.sent,a&&a.data&&a.data.data&&(n=a.data.data,A.exportExcel(n));case 4:case"end":return t.stop()}}),t)})))()},getData:function(e,t){var a=this;return new Promise((function(n,o){a.$axios({method:"post",url:"".concat(window.baseUrl,"/hello"),data:{skipNum:e,pageSize:t}}).then((function(e){n(e)})).catch((function(e){n(!1)}))}))},handleSizeChange:function(e){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.getData(t.currentPage,e);case 2:n=a.sent,t.allPerson=n.data.data,t.total=n.data.total;case 5:case"end":return a.stop()}}),a)})))()},handleCurrentChange:function(e){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.getData(e,t.pageSize);case 2:n=a.sent,t.allPerson=n.data.data,t.total=n.data.total;case 5:case"end":return a.stop()}}),a)})))()},editChannel:function(e){this.isAdd=!1,this.form=e,this.form.role=e.myRoleId,this.dialogVisible=!0},toAddUser:function(){this.dialogVisible=!0,this.isAdd=!0},addUser:function(e){var t=this;e.role=e.role/1;this.$axios({method:"post",url:"".concat(window.baseUrl,"/addUser"),data:e}).then((function(e){e&&e.data&&200==e.data.code?(t.$message({message:"新增成功！",type:"success"}),t.dialogVisible=!1,t.allPerson=e.data.data):t.$message({message:"新增失败！",type:"error"})})).catch((function(e){}))},delChannel:function(e){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function a(){var n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.answerFun("确定删除该用户？");case 2:if(n=a.sent,n){a.next=5;break}return a.abrupt("return");case 5:o=t,t.$axios({method:"post",url:"".concat(window.baseUrl,"/deleteUser"),data:e}).then((function(a){if(a&&a.data&&200==a.data.code){t.$message({message:"删除成功！",type:"success"});for(var n=0;n<o.allPerson.length;n++)if(o.allPerson[n].id==e.id){o.allPerson.splice(n,1);break}}else t.$message({message:"删除失败！",type:"error"})})).catch((function(e){}));case 7:case"end":return a.stop()}}),a)})))()},handleClose:function(){},sureChange:function(e){var t=this;this.$axios({method:"post",url:"".concat(window.baseUrl,"/updateUser"),data:e}).then((function(e){e&&e.data&&200==e.data.code?(t.$message({message:"修改成功！",type:"success"}),t.dialogVisible=!1):t.$message({message:"修改失败！",type:"error"})})).catch((function(e){}))}}},B=E,F=Object(c["a"])(B,M,z,!1,null,null,null),J=F.exports,T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{display:"flex","flex-direction":"column",height:"100%"}},[a("p",[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.form.option,callback:function(t){e.$set(e.form,"option",t)},expression:"form.option"}},[a("el-option",{attrs:{label:"功能分类（一级系统）",value:"functionkindOne"}}),a("el-option",{attrs:{label:"功能分类（子系统）",value:"functionkindSon"}}),a("el-option",{attrs:{label:"车组号",value:"catGroupNum"}}),a("el-option",{attrs:{label:"车号",value:"catNum"}}),a("el-option",{attrs:{label:"故障等级",value:"errorLevel"}}),a("el-option",{attrs:{label:"故障描述",value:"errorMsg"}}),a("el-option",{attrs:{label:"详细方法",value:"moreDesc"}}),a("el-option",{attrs:{label:"处理结果",value:"theResult"}})],1),a("el-input",{staticStyle:{width:"200px"},model:{value:e.inputValue,callback:function(t){e.inputValue="string"===typeof t?t.trim():t},expression:"inputValue"}}),a("el-button",{attrs:{type:"success",disabled:!e.canRead,size:"small"},on:{click:e.search}},[e._v("搜索")]),a("el-button",{attrs:{type:"primary",disabled:!e.canUpdate,size:"small"},on:{click:e.exportExcel}},[e._v("导出excel")])],1),a("div",{staticStyle:{flex:"1"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.allPerson,border:"",size:"mini",height:"100%"}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),a("el-table-column",{attrs:{prop:"functionkindOne",label:"功能分类（一级系统）",width:"160"}}),a("el-table-column",{attrs:{prop:"functionkindSon",label:"功能分类（子系统）",width:"160"}}),a("el-table-column",{attrs:{prop:"catGroupNum",label:"车组号",width:"120"}}),a("el-table-column",{attrs:{prop:"catNum",label:"车号",width:"120"}}),a("el-table-column",{attrs:{prop:"errorLevel",label:"故障等级",width:"120"}}),a("el-table-column",{attrs:{prop:"errorMsg",label:"故障描述",width:"120"}}),a("el-table-column",{attrs:{prop:"moreDesc",label:"详细方法",width:"120"}}),a("el-table-column",{attrs:{prop:"theResult",label:"处理结果",width:"120"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{disabled:!e.canUpdate,type:"text",size:"small"},on:{click:function(a){return e.editChannel(t.row)}}},[e._v("编辑")]),a("el-button",{staticStyle:{color:"#ef5050"},attrs:{disabled:!e.canDelete,type:"text",size:"small"},on:{click:function(a){return e.delChannel(t.row)}}},[e._v("删除")])]}}])})],1)],1),e.canRead?a("el-pagination",{staticStyle:{"padding-top":"10px"},attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,"page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}}):e._e()],1)},V=[],L={data:function(){return{fatherName:"列车管理",pageName:"列车列表",canRead:!1,canAdd:!1,canDelete:!1,canUpdate:!1,inputValue:"sdf",isDisable:!0,allPerson:[],dialogVisible:!1,form:{option:""},isAdd:!1,currentPage:1,pageSize:10,total:50}},mounted:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getData(1,10);case 2:a=t.sent,e.allPerson=a.data.data,e.total=a.data.total,e.getRight();case 6:case"end":return t.stop()}}),t)})))()},methods:{getRight:function(){var e=this.getPageRight(this.fatherName,this.pageName);if(e)for(var t=0;t<e.children.length;t++){var a=e.children[t];switch(a.path){case"read":this.canRead=a.checked;break;case"add":this.canAdd=a.checked;break;case"delete":this.canDelete=a.checked;break;case"update":this.canUpdate=a.checked;break}}},search:function(){var e=this;this.$axios({method:"post",url:"".concat(window.baseUrl,"/search"),data:{name:this.form.option,value:this.inputValue,skipNum:this.currentPage,pageSize:this.pageSize}}).then((function(t){e.allPerson=t.data.data,e.total=t.data.total})).catch((function(e){}))},exportExcel:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getData(1,e.total);case 2:a=t.sent,a&&a.data&&a.data.data&&(n=a.data.data,A.exportExcel(n));case 4:case"end":return t.stop()}}),t)})))()},getData:function(e,t){var a=this;return new Promise((function(n,o){a.$axios({method:"post",url:"".concat(window.baseUrl,"/search"),data:{name:a.form.option,value:a.inputValue,skipNum:e,pageSize:t}}).then((function(e){n(e)})).catch((function(e){n(!1)}))}))},handleSizeChange:function(e){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.getData(t.currentPage,e);case 2:n=a.sent,t.allPerson=n.data.data,t.total=n.data.total;case 5:case"end":return a.stop()}}),a)})))()},handleCurrentChange:function(e){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.getData(e,t.pageSize);case 2:n=a.sent,t.allPerson=n.data.data,t.total=n.data.total;case 5:case"end":return a.stop()}}),a)})))()},editChannel:function(e){this.isAdd=!1,this.form=e,this.dialogVisible=!0},toAddUser:function(){this.dialogVisible=!0,this.isAdd=!0},addUser:function(e){var t=this;this.$axios({method:"post",url:"".concat(window.baseUrl,"/addUser"),data:e}).then((function(e){e&&e.data&&200==e.data.code?(t.$message({message:"新增成功！",type:"success"}),t.dialogVisible=!1,t.allPerson=e.data.data):t.$message({message:"新增失败！",type:"error"})})).catch((function(e){}))},delChannel:function(e){var t=this,a=this;this.$axios({method:"post",url:"".concat(window.baseUrl,"/deleteUser"),data:e}).then((function(n){if(n&&n.data&&200==n.data.code){t.$message({message:"删除成功！",type:"success"});for(var o=0;o<a.allPerson.length;o++)if(a.allPerson[o].id==e.id){a.allPerson.splice(o,1);break}}else t.$message({message:"删除失败！",type:"error"})})).catch((function(e){}))},handleClose:function(){},sureChange:function(e){var t=this;this.$axios({method:"post",url:"".concat(window.baseUrl,"/updateUser"),data:e}).then((function(e){e&&e.data&&200==e.data.code?(t.$message({message:"修改成功！",type:"success"}),t.dialogVisible=!1):t.$message({message:"修改失败！",type:"error"})})).catch((function(e){}))}}},H=L,G=Object(c["a"])(H,T,V,!1,null,null,null),K=G.exports,q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",{staticClass:"h50"},[a("el-button",{staticStyle:{float:"right","margin-top":"10px"},attrs:{disabled:!e.canAdd,type:"success",size:"mini"},on:{click:e.addRole}},[e._v("增加")]),e._v(" 角色列表：")],1),a("el-table",{staticStyle:{flex:"1",width:"100%"},attrs:{data:e.allRole,border:"",size:"mini"}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),a("el-table-column",{attrs:{prop:"name",label:"角色名",width:"120"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return["admin"==t.row.name?a("span",[e._v(" 最高管理员不允许修改 ")]):a("span",[a("el-button",{attrs:{type:"text",disabled:!e.canUpdate,size:"small"},on:{click:function(a){return e.editRow(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"text",disabled:!e.canDelete,size:"small"},on:{click:function(a){return e.delRow(t.row)}}},[a("span",{staticClass:"redColor"},[e._v("删除")])])],1)]}}])})],1),a("el-dialog",{staticClass:"myDialog blueHead",attrs:{title:e.isAdd?"新增角色":"修改角色",visible:e.showRight,"close-on-click-modal":!1,width:"50%"},on:{"update:visible":function(t){e.showRight=t}}},[a("div",{staticStyle:{padding:"0 15px"}},[e.isAdd?a("p",[e._v(" 角色名称： "),a("el-input",{staticStyle:{width:"250px"},on:{blur:function(t){return e.blurFun(e.currentRole.name)}},model:{value:e.currentRole.name,callback:function(t){e.$set(e.currentRole,"name",t)},expression:"currentRole.name"}}),e.showTip?a("span",{staticClass:"redColor font12"},[e._v(" "+e._s(e.tipText)+" ")]):e._e()],1):a("p",[e._v("当前角色："+e._s(e.currentRole.name))]),a("div",{staticStyle:{"max-height":"460px",overflow:"auto","margin-top":"10px"}},[a("rightBox",{attrs:{allRight:e.currentRole.roleRight},on:{pageSelect:e.pageSelectFun}})],1),a("p",{staticStyle:{"text-align":"right","margin-bottom":"15px","margin-top":"5px"}},[a("el-button",{on:{click:function(t){e.showRight=!1}}},[e._v("取 消")]),e.isAdd?a("el-button",{attrs:{type:"primary",disabled:e.isUsed},on:{click:function(t){return e.saveRight(e.currentRole)}}},[e._v("确 定")]):a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateRole(e.currentRole)}}},[e._v("修 改")])],1)])])],1)},Q=[],W=(a("99af"),a("b0c0"),a("2909")),X=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ul",{staticClass:"rightUl"},e._l(e.allRight,(function(t,n){return a("li",{key:t.name+n},[a("div",{staticClass:"leftOne pd-lr10 vCenter radius_tbl5"},[e.showCheckbox?a("el-checkbox",{attrs:{label:t.name,name:"type",value:t.checked},on:{change:function(a){return e.pageSelect(t.name)}}}):a("span",{staticClass:"blueOne"},[e._v(" "+e._s(t.name)+" ")])],1),a("div",{staticClass:"leftFinal pd-lr10 vCenter",staticStyle:{"padding-top":"10px"}},[a("ul",{staticClass:"sonRight"},e._l(t.children,(function(n,o){return a("li",{key:n.name+o},[a("div",{staticClass:"leftTwo vCenter pd-lr10"},[e.showCheckbox?a("el-checkbox",{attrs:{label:n.name,name:"type",value:n.checked},on:{change:function(a){return e.pageSelect(t.name,n.name)}}}):a("span",[e._v(" "+e._s(n.name)+" ")])],1),a("div",{staticClass:"leftFinal pd-lr10 vCenter"},[a("ul",{staticClass:"sunRight"},e._l(n.children,(function(o,i){return a("li",{key:o.name+i},[e.showCheckbox?a("el-checkbox",{attrs:{label:o.name,name:"type",value:o.checked},on:{change:function(a){return e.pageSelect(t.name,n.name,o.name)}}}):a("span",{staticClass:"grayOne"},[e._v(" "+e._s(o.name)+" ")])],1)})),0)])])})),0)]),a("div",{staticStyle:{padding:"10px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.updateOnePage(t)}}},[e._v("修改")]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return e.delOnePage(t)}}},[e._v("删除")])],1)])})),0)])},Y=[],Z=(a("fb6a"),{methods:{updateOnePage:function(e,t){console.log("updateOnePage:",e,t)},delOnePage:function(e){console.log("delOnePage:",e),this.$emit("delOnePage",e)},pageSelect:function(){var e=Array.prototype.slice.call(arguments);console.log("pageSelect",e),this.$emit("pageSelect",e)}},props:{allRight:{type:Array,default:function(){return[]}},showCheckbox:{type:Boolean,default:!0}},data:function(){return{}}}),ee=Z,te=(a("6703"),Object(c["a"])(ee,X,Y,!1,null,"914de2d4",null)),ae=te.exports,ne={computed:Object(f["a"])({},Object(v["b"])(["userInfo","allRight"])),components:{rightBox:ae},data:function(){return{fatherName:"权限管理",pageName:"角色列表",canRead:!1,canAdd:!1,canDelete:!1,canUpdate:!1,isUsed:!0,showTip:!1,tipText:"该角色名已被占用!",allCount:0,currentRole:{name:"",roleRight:null},baseRight:null,showRight:!1,allRole:[],allPerson:[],isAdd:!1}},mounted:function(){this.initData(),this.getAllRole(),this.getRight()},methods:{blurFun:function(e){this.isUsed=!1,this.showTip=!1;for(var t=0;t<this.allRole.length;t++)if(this.allRole[t].name==e){this.isUsed=!0,this.showTip=!0;break}this.isUsed&&this.$message({message:"该角色名已被占用!",type:"warning"})},getRight:function(){var e=this.getPageRight(this.fatherName,this.pageName);if(e)for(var t=0;t<e.children.length;t++){var a=e.children[t];switch(a.path){case"read":this.canRead=a.checked;break;case"add":this.canAdd=a.checked;break;case"delete":this.canDelete=a.checked;break;case"update":this.canUpdate=a.checked;break}}},getAllRole:function(){var e=this;this.$axios({method:"get",url:"".concat(window.baseUrl,"/getAllRole")}).then((function(t){e.allRole=[];for(var a=0;a<t.data.data.length;a++){var n=JSON.parse(JSON.stringify(t.data.data[a]));n.roleRight=JSON.parse(n.roleRight),e.allRole.push(n)}})).catch((function(e){}))},initData:function(){this.baseRight=JSON.parse(JSON.stringify(this.allRight));for(var e=0;e<this.baseRight.length;e++){var t=this.baseRight[e];t.hasOwnProperty("checked")||this.$set(t,"checked",!1);for(var a=t.children,n=0;n<a.length;n++){var o=a[n];o.hasOwnProperty("checked")||this.$set(o,"checked",!1);for(var i=o.children,r=0;r<i.length;r++){var l=i[r];l.hasOwnProperty("checked")||this.$set(l,"checked",!1)}}}},pageSelectFun:function(e){var t=Object(W["a"])(e),a=this.currentRole.roleRight;if(e.length>0&&this.loopChangeCheck(e,a),1!=t.length){for(var n,o=0;o<a.length;o++)if(a[o].name==t[0]){n=a[o];break}var i=[],r=[];this.allCount=0,this.findSon(n.children,r,i);for(var l=0;l<i.length;l++){var c=i[l].path;this.changeValue(Object(W["a"])(c),n.children,i[l].count)}n.checked=this.allCount>0}},changeValue:function(e,t,a,n){for(var o=e.shift(),i=0;i<t.length;i++){var r=t[i];r.name==o&&(a>0?(r.checked=!0,this.allCount+=a):r.checked=!1,e.length>0&&this.changeValue(e,r.children,a))}},findSon:function(e,t,a){if(e[0].children)for(var n=0;n<e.length;n++){var o=e[n],i=[].concat(Object(W["a"])(t),[o.name]);this.findSon(o.children,i,a)}else{for(var r=0,l=0;l<e.length;l++)e[l].checked&&r++;a.push({path:t,count:r})}},loopChangeCheck:function(e,t){for(var a=e.shift(),n=0;n<t.length;n++)t[n].name==a&&(e.length>0?this.loopChangeCheck(e,t[n].children):0==e.length&&(t[n].checked=!t[n].checked,t[n].children&&this.loopSonCheck(t[n].children,t[n].checked)))},loopSonCheck:function(e,t){for(var a=0;a<e.length;a++)e[a].checked=t,e[a].children&&this.loopSonCheck(e[a].children,t)},checkOnce:function(e){for(var t=[],a=0;a<e.length;a++)e[a].children&&this.checkOnceSon(e[a].children,a,t)},checkOnceSon:function(e,t,a){if(e[0].children)for(var n=0;n<e.length;n++)this.checkOnceSon(e[n].children,t,a);else{for(var o=0,i=0;i<e.length;i++)e[i].checked&&o++;a.push({index:t,count:o})}},saveRight:function(e){var t=this,a=JSON.parse(JSON.stringify(e)),n={};n.name=a.name,n.roleRight=JSON.stringify(a.roleRight),this.$axios({method:"post",url:"".concat(window.baseUrl,"/saveRole"),data:n}).then((function(e){n.roleRight=JSON.parse(n.roleRight),t.allRole.push(n),t.showRight=!1})).catch((function(e){t.showRight=!1}))},updateRole:function(e){var t=this,a=JSON.parse(JSON.stringify(e));a.roleRight=JSON.stringify(a.roleRight),this.$axios({method:"post",url:"".concat(window.baseUrl,"/updateRole"),data:a}).then((function(a){a&&t.$message({message:"修改成功",type:"success"}),t.showRight=!1,e.id==t.userInfo.myRoleId&&t.getMyRight(t.userInfo.myRoleId)})).catch((function(e){t.showRight=!1,t.$message({message:"修改失败",type:"error"})}))},addRole:function(){this.isAdd=!0,this.showRight=!0,this.currentRole.name="",this.currentRole.roleRight=this.baseRight},editRow:function(e){this.isAdd=!1,this.showRight=!0,this.currentRole=e},delRow:function(e){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.answerFun("确定删除该角色？");case 2:if(n=a.sent,n){a.next=5;break}return a.abrupt("return");case 5:t.$axios({method:"post",url:"".concat(window.baseUrl,"/delRoleById"),data:{id:e.id}}).then((function(a){for(var n=0;n<t.allRole.length;n++)if(t.allRole[n].id==e.id){t.allRole.splice(n,1);break}})).catch((function(e){}));case 6:case"end":return a.stop()}}),a)})))()}}},oe=ne,ie=Object(c["a"])(oe,q,Q,!1,null,null,null),re=ie.exports,le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%",display:"flex","flex-direction":"column"}},[a("p",{staticClass:"h50"},[e._v("权限列表：(基础权限由后台返回) "),a("el-button",{staticStyle:{"margin-left":"50px"},attrs:{type:"primary"},on:{click:e.addModule}},[e._v("增加模块")]),a("el-button",{attrs:{type:"success"},on:{click:e.backModule}},[e._v("恢复出厂模块")])],1),a("div",{staticStyle:{height:"cal(100%-50px)",overflow:"auto"}},[0==e.theAllRight.length?a("p",{staticClass:"pd-l10"},[e._v("尚未有权限数据，"),a("span",{staticClass:"myBlue hand",on:{click:e.addModule}},[e._v("马上添加")])]):a("rightBox",{attrs:{allRight:e.theAllRight,showCheckbox:e.showCheckbox},on:{pageSelect:e.pageSelectFun,delOnePage:e.delOnePage}})],1),a("el-dialog",{attrs:{title:e.boxName,visible:e.showModule,width:"40%"},on:{"update:visible":function(t){e.showModule=t}}},[a("el-form",{ref:"form",attrs:{model:e.oneModule,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"模块名称"}},[a("el-input",{model:{value:e.oneModule.name,callback:function(t){e.$set(e.oneModule,"name",t)},expression:"oneModule.name"}})],1),a("el-form-item",{attrs:{label:"图标"}},[a("el-select",{attrs:{placeholder:"请选择图标"},model:{value:e.oneModule.icon,callback:function(t){e.$set(e.oneModule,"icon",t)},expression:"oneModule.icon"}},[a("el-option",{attrs:{label:"饿了么",value:"el-icon-eleme"}},[a("i",{staticClass:"el-icon-eleme"})]),a("el-option",{attrs:{label:"加号",value:"el-icon-plus"}},[a("i",{staticClass:"el-icon-plus"})])],1)],1),a("el-form-item",{attrs:{label:"子模块"}},[a("p",[a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.addSonModule(e.oneModule)}}},[a("i",{staticClass:"el-icon-plus"}),e._v("添加")])],1),a("ul",{staticStyle:{"font-size":"14px"}},e._l(e.oneModule.children,(function(t,n){return a("li",[e._v(" "+e._s(t.name)+": "+e._s(t.path)+" "),a("i",{staticClass:"el-icon-remove hand",on:{click:function(a){return e.removeSonModule(t)}}})])})),0)])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.showModule=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.sureAdd(e.oneModule)}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:e.sonBoxName,visible:e.showSonBox,width:"30%"},on:{"update:visible":function(t){e.showSonBox=t}}},[a("el-form",{ref:"sonform",attrs:{model:e.sonModule,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"模块名称"}},[a("el-input",{model:{value:e.sonModule.name,callback:function(t){e.$set(e.sonModule,"name",t)},expression:"sonModule.name"}})],1),a("el-form-item",{attrs:{label:"路径"}},[a("el-input",{model:{value:e.sonModule.path,callback:function(t){e.$set(e.sonModule,"path",t)},expression:"sonModule.path"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.showSonBox=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.sureAddSon(e.sonModule)}}},[e._v("确 定")])],1)],1)],1)},ce=[],se={components:{rightBox:ae},data:function(){return{boxName:"添加模块",sonBoxName:"添加子模块",showSonBox:!1,showModule:!1,showCheckbox:!1,allPerson:[],theAllRight:[],oneModule:{id:1,name:"模块名称",icon:"el-icon-user-solid",checked:!0,children:[]},sonModule:{name:"子模块名称",path:"/user",checked:!0,children:[{name:"增",path:"add",checked:!0},{name:"删",path:"delete",checked:!0},{name:"改",path:"update",checked:!0},{name:"查",path:"read",checked:!0}]},allRight:[{id:1,name:"用户管理",icon:"el-icon-user-solid",checked:!0,children:[{id:11,name:"用户列表",path:"/user",checked:!0,children:[{id:111,name:"增",path:"add",checked:!0},{id:112,name:"删",path:"delete",checked:!0},{id:113,name:"改",path:"update",checked:!0},{id:114,name:"查",path:"read",checked:!0}]}]},{id:2,name:"列车管理",icon:"el-icon-s-cooperation",checked:!0,children:[{id:21,name:"列车列表",checked:!0,path:"/carManager",children:[{id:211,name:"增",path:"add",checked:!0},{id:212,name:"删",path:"delete",checked:!0},{id:213,name:"改",path:"update",checked:!0},{id:214,name:"查",path:"read",checked:!0}]},{id:22,name:"数据导入",path:"/importExcel",checked:!0,children:[{id:221,name:"增",path:"add",checked:!0},{id:222,name:"删",path:"delete",checked:!0},{id:223,name:"改",path:"update",checked:!0},{id:224,name:"查",path:"read",checked:!0}]}]},{id:3,name:"权限管理",icon:"el-icon-s-tools",checked:!0,children:[{id:31,name:"角色列表",path:"/role",checked:!0,children:[{id:311,name:"增",path:"add",checked:!0},{id:312,name:"删",path:"delete",checked:!0},{id:313,name:"改",path:"update",checked:!0},{id:314,name:"查",path:"read",checked:!0}]},{id:32,name:"权限列表",path:"/right",checked:!0,children:[{id:321,name:"增",path:"add",checked:!0},{id:322,name:"删",path:"delete",checked:!0},{id:323,name:"改",path:"update",checked:!0},{id:324,name:"查",path:"read",checked:!0}]}]}]}},mounted:function(){this.getRight()},methods:{backModule:function(){this.composeData(this.allRight)},delOnePage:function(e){for(var t=JSON.parse(JSON.stringify(this.theAllRight)),a=0;a<t.length;a++)if(t[a].name==e.name){t.splice(a,1);break}this.composeData(t)},getRight:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getData("/getRight");case 2:a=t.sent,n=a.data.data,console.log("getRight-rel:",a,n),e.theAllRight=JSON.parse(n[0].content);case 6:case"end":return t.stop()}}),t)})))()},sureAddSon:function(e){console.log("sonModule:",e),this.oneModule.children.push(JSON.parse(JSON.stringify(e))),this.showSonBox=!1},removeSonModule:function(e){console.log("removeSonModule",e);for(var t=this.oneModule.children,a=0;a<t.length;a++)if(t[a].path==e.path){t.splice(a,1);break}},sureAdd:function(e){console.log("sureAdd",e);var t=JSON.parse(JSON.stringify(this.theAllRight));t.push(e),this.showModule=!1,this.composeData(t)},composeData:function(e){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function a(){var n,o,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n={content:JSON.stringify(e)},a.next=3,t.postData("/saveRight",n);case 3:o=a.sent,i=o.data.data,console.log("getRight-rel:",o,i),t.theAllRight=JSON.parse(i[0].content);case 7:case"end":return a.stop()}}),a)})))()},addModule:function(){console.log("addModule"),this.showModule=!0},addSonModule:function(e){console.log("addSonModule:",e),this.showSonBox=!0},pageSelectFun:function(e){console.log("pageSelect:",e)},sonPageSelectFun:function(e){},sunPageSelectFun:function(e){}}},de=se,ue=Object(c["a"])(de,le,ce,!1,null,null,null),he=ue.exports,pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",[e._v("导入Excel数据")]),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",staticStyle:{padding:"10px 10px 0"},attrs:{model:e.ruleForm,size:"mini","label-width":"140px",enctype:"multipart/form-data"}},[a("el-form-item",{attrs:{label:"选择导入excel路径",prop:"excelPath"}},[a("el-input",{attrs:{type:"file",name:"file"},nativeOn:{change:function(t){return e.inputChange(t)}},model:{value:e.ruleForm.excelPath,callback:function(t){e.$set(e.ruleForm,"excelPath",t)},expression:"ruleForm.excelPath"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.importData("ruleForm")}}},[e._v("上传")])],1)],1)],1)},me=[],fe={computed:Object(f["a"])({},Object(v["b"])(["userInfo"])),data:function(){return{ruleForm:{excelPath:""},theFile:""}},methods:{inputChange:function(e){this.theFile=e.target.files[0]},importData:function(){var e=this,t=new FormData;t.append("file",this.theFile),t.append("owner",this.userInfo.id);var a={headers:{"Content-Type":"multipart/form-data"}};this.$axios.post("".concat(window.baseUrl,"/importExcelbb"),t,a).then((function(t){t.data&&200==t.data.code?e.$message({message:"上传成功！",type:"success"}):e.$message({message:"上传错误！",type:"error"})})).catch((function(t){e.$message({message:"服务器发生异常！",type:"error"})}))}}},ge=fe,be=Object(c["a"])(ge,pe,me,!1,null,null,null),ve=be.exports,we=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-upload",{ref:"uploadBox",attrs:{action:"233",limit:1,"auto-upload":!1,"http-request":e.postPhoto,"list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-change":e.fail}},[a("i",{staticClass:"el-icon-plus"})]),a("span",[e._v("只支持jpg与png格式文件上传")]),a("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})]),a("el-button",{attrs:{type:"success"},on:{click:e.postImg}},[e._v("上传")]),a("div",[a("p",[e._v("上传成功列表：")]),a("div",{staticClass:"imgBox"},[a("ul",e._l(e.allPath,(function(e,t){return a("li",{key:e.imgPath+t},[a("img",{attrs:{src:e.imgPath}})])})),0)])])],1)},ke=[],xe={computed:Object(f["a"])({},Object(v["b"])(["userInfo"])),data:function(){return{allPath:[],dialogImageUrl:"",dialogVisible:!1,disabled:!1}},mounted:function(){this.getMyImg()},methods:{getMyImg:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.postData("/getMyImg",{userId:e.userInfo.id});case 2:a=t.sent,console.log("rel-img:",a),a&&(e.allPath=a.data.data);case 5:case"end":return t.stop()}}),t)})))()},postPhoto:function(e){console.log("postPhoto:",e)},fail:function(e){console.log("file:",e),this.dialogImageUrl=e.url,this.dialogImageUrl=new window.File([this.dialogImageUrl],e.name,{type:e.type}),this.imgPost=e.raw},postImg:function(){var e=this,t=new FormData;t.append("file",this.imgPost),t.append("userId",this.userInfo.id),t.append("username",this.userInfo.username),console.log(t),this.$axios.post("".concat(window.baseUrl,"/fileUpload"),t).then((function(t){console.log("response:",t,Object({NODE_ENV:"production",BASE_URL:"/"})),t.data&&(e.allPath=t.data.data,e.$refs.uploadBox.clearFiles(),e.myMsg("上传成功!","success"))})).catch((function(t){e.myMsg("上传失败!","error"),console.log(t)}))},handleRemove:function(e){console.log(e)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleDownload:function(e){console.log(e)}}},ye=xe,Re=(a("4e49"),Object(c["a"])(ye,we,ke,!1,null,null,null)),Se=Re.exports,_e=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"datas-content",staticStyle:{overflow:"auto",height:"100%",display:"flex","flex-direction":"column"}},[a("h2",[e._v(" 故障统计 ")]),a("div",{staticStyle:{"background-color":"#eee",height:"90px",display:"flex","margin-bottom":"5px",padding:"15px 10px 0"}},[a("div",{staticClass:"searchUl"},[a("ul",[a("li",[e._v(" 用户名: "),a("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini"},model:{value:e.theUserName,callback:function(t){e.theUserName=t},expression:"theUserName"}})],1),a("li",[e._v(" 项目名: "),a("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini"},model:{value:e.theProjectName,callback:function(t){e.theProjectName=t},expression:"theProjectName"}})],1),a("li",[e._v(" 通道名: "),a("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini"},model:{value:e.theChannelName,callback:function(t){e.theChannelName=t},expression:"theChannelName"}})],1),a("li",[e._v(" 产品名称: "),a("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini"},model:{value:e.productName,callback:function(t){e.productName=t},expression:"productName"}})],1),a("li",[e._v(" 产品批次: "),a("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini"},model:{value:e.productBatch,callback:function(t){e.productBatch=t},expression:"productBatch"}})],1),a("li",[e._v(" 产品代号: "),a("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini"},model:{value:e.productCode,callback:function(t){e.productCode=t},expression:"productCode"}})],1),a("li",[e._v(" 产品序列号: "),a("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini"},model:{value:e.productSerialNumber,callback:function(t){e.productSerialNumber=t},expression:"productSerialNumber"}})],1),a("li",{staticClass:"time"},[a("span",{staticStyle:{width:"90px"}},[e._v(" 创建时间: ")]),a("el-date-picker",{attrs:{type:"daterange",size:"mini",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{change:e.selectTimeChange},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}})],1)]),a("el-button",{staticStyle:{"margin-left":"50px"},attrs:{type:"success",size:"mini"},on:{click:e.onSearch}},[e._v("搜索")])],1)]),a("div",{staticStyle:{height:"150px",display:"flex","flex-direction":"column",padding:"10px",border:"1px solid #ccc",margin:"10px 0"}},[a("p",{staticStyle:{height:"30px","line-height":"30px"}},[e._v("分析符合条件的数据，根据分类名区分统计：")]),a("ul",{staticClass:"statistics"},e._l(e.allKind,(function(t,n){return a("li",{key:t.name+n},[a("span",{staticStyle:{"margin-right":"15px"}},[e._v(e._s(t.name)+": "+e._s(t.count)+"条")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.showKindDetail}},[e._v("详情")])],1)})),0)]),a("div",{staticStyle:{width:"100%",flex:"1",overflow:"auto","font-size":"12px"}},[a("el-table",{ref:"multipleTable",attrs:{data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"序号",type:"index",width:"50"}}),a("el-table-column",{attrs:{label:"用户",prop:"userName"}}),a("el-table-column",{attrs:{label:"项目名称",prop:"projectName"}}),a("el-table-column",{attrs:{label:"通道名",prop:"channelName"}}),a("el-table-column",{attrs:{label:"产品名称",prop:"proName"}}),a("el-table-column",{attrs:{label:"产品代号",prop:"proCode"}}),a("el-table-column",{attrs:{label:"产品批次",prop:"proBranch"}}),a("el-table-column",{attrs:{label:"产品序列号",prop:"inputSn"}}),a("el-table-column",{attrs:{label:"测试结果",prop:"testResult",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return["NG"==t.row.testResult?a("span",{staticStyle:{color:"red"}},[e._v(" "+e._s(t.row.testResult)+" ")]):a("span",[e._v(e._s(t.row.testResult))])]}}])}),a("el-table-column",{attrs:{label:"测试日期",prop:"testTime",width:"180"}})],1)],1),a("el-pagination",{staticStyle:{height:"32px","text-align":"center"},attrs:{"current-page":e.pageNum,"page-sizes":e.pageSizeArr,"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.allDataCount},on:{"size-change":e.onSizeChange,"current-change":e.onCurrentChange}})],1)},Ce=[],Oe={data:function(){return{allKind:[{name:"电阻类",count:338},{name:"电压类",count:35},{name:"电流类",count:125},{name:"其他类",count:79}],theUserName:"",theProjectName:"",theChannelName:"",productName:"",productBatch:"",productCode:"",productSerialNumber:"",pageNum:1,pageSize:10,pageSizeArr:[10,20,30,50],allDataCount:100,oneRow:{userName:"admin",projectName:"aa",channelName:"up_0",proName:"bb",proCode:"123",proBranch:"456",inputSn:"202008",testResult:"NG",testTime:"2020-11-30 12:23:45"},tableData:[],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},value1:"",value2:""}},created:function(){this.initData()},methods:{initData:function(){for(var e=0;e<30;e++){var t=JSON.parse(JSON.stringify(this.oneRow));e/5>1&&(t.proName=t.proName+5*parseInt(e/5)),e%5==0&&(t.channelName="up_1"),this.tableData.push(t)}},onSizeChange:function(){},onCurrentChange:function(){},selectTimeChange:function(){},onSearch:function(){}}},Pe=Oe,Ne=(a("e140"),Object(c["a"])(Pe,_e,Ce,!1,null,"1d5cf071",null)),$e=Ne.exports;n["default"].use(h["a"]);var je=[{path:"/",name:"Home",component:D,children:[{path:"/user",name:"User",component:J},{path:"/carManager",name:"carManager",component:K},{path:"/importExcel",name:"importExcel",component:ve},{path:"/paperUpload",name:"paperUpload",component:Se},{path:"/role",name:"Role",component:re},{path:"/right",name:"Right",component:he},{path:"/datas",name:"datas",component:$e}]},{path:"/login",name:"Login",component:function(){return a.e("about").then(a.bind(null,"578a"))}}],Ue=new h["a"]({mode:"history",base:"/",routes:je}),De=Ue,Me=a("53ca");function ze(e,t){"object"==Object(Me["a"])(t)?(t.password&&delete t.password,window.localStorage.setItem(e,JSON.stringify(t))):window.localStorage.setItem(e,t)}n["default"].use(v["a"]);var Ie=new v["a"].Store({getters:{},state:{flushId:0,userInfo:null,myRole:null,allRight:[{id:1,name:"用户管理",icon:"el-icon-user-solid",checked:!0,children:[{id:11,name:"用户列表",path:"/user",checked:!0,children:[{id:111,name:"增",path:"add",checked:!0},{id:112,name:"删",path:"delete",checked:!0},{id:113,name:"改",path:"update",checked:!0},{id:114,name:"查",path:"read",checked:!0}]}]},{id:2,name:"列车管理",icon:"el-icon-s-cooperation",checked:!0,children:[{id:21,name:"列车列表",checked:!0,path:"/carManager",children:[{id:211,name:"增",path:"add",checked:!0},{id:212,name:"删",path:"delete",checked:!0},{id:213,name:"改",path:"update",checked:!0},{id:214,name:"查",path:"read",checked:!0}]},{id:22,name:"数据导入",path:"/importExcel",checked:!0,children:[{id:221,name:"增",path:"add",checked:!0},{id:222,name:"删",path:"delete",checked:!0},{id:223,name:"改",path:"update",checked:!0},{id:224,name:"查",path:"read",checked:!0}]}]},{id:3,name:"权限管理",icon:"el-icon-s-tools",checked:!0,children:[{id:31,name:"角色列表",path:"/role",checked:!0,children:[{id:311,name:"增",path:"add",checked:!0},{id:312,name:"删",path:"delete",checked:!0},{id:313,name:"改",path:"update",checked:!0},{id:314,name:"查",path:"read",checked:!0}]},{id:32,name:"权限列表",path:"/right",checked:!0,children:[{id:321,name:"增",path:"add",checked:!0},{id:322,name:"删",path:"delete",checked:!0},{id:323,name:"改",path:"update",checked:!0},{id:324,name:"查",path:"read",checked:!0}]}]}]},mutations:{saveMyRole:function(e,t){e.myRole=t},saveFlushId:function(e,t){e.flushId=t,console.log("object:",t)},saveUserInfo:function(e,t){e.userInfo=t,ze("userInfo",t)}},actions:{},modules:{}});function Ae(e){var t=window.localStorage.getItem(e);if(console.log("strData:",t),t){var a=JSON.parse(t);a&&setTimeout((function(){Ie.commit("saveFlushId",Date.now()+"")}),100),Ie.commit("saveUserInfo",a)}}Ae("userInfo"),De.beforeEach((function(e,t,a){"/login"!=e.path?Ie.state.userInfo?a():a("/login"):a()}));var Ee={computed:Object(f["a"])({},Object(v["b"])(["myRole"])),data:function(){return{myname:"mixin"}},created:function(){},mounted:function(){},methods:{myMsg:function(e,t){this.$message({message:e,type:t})},getData:function(e){var t=this;return new Promise((function(a,n){t.$axios({method:"get",url:"".concat(window.baseUrl).concat(e)}).then((function(e){console.log("response:",e,e.data.data),a(e)})).catch((function(e){a(!1),console.log(e)}))}))},postData:function(e,t){var a=this;return new Promise((function(n,o){a.$axios.post("".concat(window.baseUrl).concat(e),t).then((function(e){console.log("response:",e),n(e)})).catch((function(e){console.log(e),n(!1)}))}))},answerFun:function(e,t,a){var n=this;return e||(e="确定要删除吗？"),new Promise((function(o,i){n.$confirm(e,"提示",{confirmButtonText:t||"确定",cancelButtonText:a||"取消",type:"warning"}).then(Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:o(!0);case 1:case"end":return e.stop()}}),e)})))).catch((function(){o(!1)}))}))},getMyRight:function(e){var t=this;this.$axios.post("".concat(window.baseUrl,"/getRightByRoleId"),{role:e}).then((function(e){console.log("response-role:",e);var a=e.data.data[0];a.roleRight=JSON.parse(a.roleRight),t.$store.commit("saveMyRole",a)})).catch((function(e){t.$message({message:"服务器发生异常！",type:"error"})}))},getPageRight:function(e,t){if(this.myRole&&this.myRole.roleRight){for(var a,n=0;n<this.myRole.roleRight.length;n++)if(this.myRole.roleRight[n].name==e)for(var o=this.myRole.roleRight[n].children,i=0;i<o.length;i++)if(o[i].name==t){a=o[i];break}return a}}}},Be=a("bc3a"),Fe=a.n(Be);n["default"].mixin(Ee),n["default"].use(i.a),window.crossPath="/api";var Je=!0;window.baseUrl=Je?"/api":window.crossPath,n["default"].prototype.$axios=Fe.a,n["default"].config.productionTip=!1,new n["default"]({router:De,store:Ie,render:function(e){return e(u)}}).$mount("#app")},"5ced":function(e,t,a){},6703:function(e,t,a){"use strict";var n=a("3ac9"),o=a.n(n);o.a},8331:function(e,t,a){},"85ec":function(e,t,a){},bd6a:function(e,t,a){},cccb:function(e,t,a){"use strict";var n=a("5ced"),o=a.n(n);o.a},e140:function(e,t,a){"use strict";var n=a("8331"),o=a.n(n);o.a},e2db:function(e,t,a){},ed48:function(e,t,a){"use strict";var n=a("bd6a"),o=a.n(n);o.a}});
//# sourceMappingURL=app.cdbd6bbd.js.map